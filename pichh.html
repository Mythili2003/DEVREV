<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script>
    fetch('https://openlibrary.org/subjects/fiction.json')
.then(response => response.json())
.then(data => {
  const booksList = document.getElementById('books');
  const cartIcon = document.getElementById('cart-icon');
  const cartItemCount = document.getElementById('cart-item-count');
  const cartContainer = document.getElementById('cart');

  let cartItems = [];

  data.works.slice(0, 5).forEach(book => {
    const bookItem = document.createElement('li');
    bookItem.className = 'book';

    const bookImage = document.createElement('img');
    bookImage.src = `https://covers.openlibrary.org/b/id/${book.cover_id}-M.jpg`;

    const bookDetails = document.createElement('div');
    bookDetails.className = 'book-details';

    const title = document.createElement('h2');
    title.textContent = book.title;

    const author = document.createElement('p');
    author.textContent = `Author: ${book.authors ? book.authors.map(author => author.name).join(', ') : 'Unknown'}`;

    const genre = document.createElement('p');
    genre.textContent = `Genre: Fiction`;

    const rating = document.createElement('p');
    rating.textContent = `Rating: ${book.rating ? book.rating.average.toFixed(2) : 'N/A'}`;

    const availability = document.createElement('p');
    availability.textContent = `Availability: ${padDigits(Math.floor(Math.random() * 100), 2)}`;

    const publishedYear = document.createElement('p');
    publishedYear.textContent = `Published Year: ${Math.floor(Math.random() * (2023 - 1900 + 1)) + 1900}`;

    const addButton = document.createElement('button');
    addButton.textContent = 'Add to Cart';
    addButton.className = 'add-button';
    addButton.addEventListener('mouseover', () => {
      addButton.style.backgroundColor = 'lightcoral';
    });
    addButton.addEventListener('mouseout', () => {
      addButton.style.backgroundColor = 'red';
    });
    addButton.addEventListener('click', () => {
      const cartItem = {
        title: book.title,
        author: book.authors ? book.authors.map(author => author.name).join(', ') : 'Unknown',
        genre: 'Fiction'
      };

      cartItems.push(cartItem);
      updateCartItemCount();
      displayCartItems();
    });

    bookDetails.appendChild(title);
    bookDetails.appendChild(author);
    bookDetails.appendChild(genre);
    bookDetails.appendChild(rating);
    bookDetails.appendChild(availability);
    bookDetails.appendChild(publishedYear);
    bookDetails.appendChild(addButton);

    bookItem.appendChild(bookImage);
    bookItem.appendChild(bookDetails);

    booksList.appendChild(bookItem);
  });

  function updateCartItemCount() {
    cartItemCount.textContent = cartItems.length;
  }

  function displayCartItems() {
    cartContainer.innerHTML = '';
    cartItems.forEach(item => {
      const cartItem = document.createElement('div');
      cartItem.className = 'cart-item';

      const cartTitle = document.createElement('p');
      cartTitle.textContent = `Title: ${item.title}`;

      const cartAuthor = document.createElement('p');
      cartAuthor.textContent = `Author: ${item.author}`;

      const cartGenre = document.createElement('p');
      cartGenre.textContent = `Genre: ${item.genre}`;
      cartItem.appendChild(cartTitle);
      cartItem.appendChild(cartAuthor);
      cartItem.appendChild(cartGenre);

      cartContainer.appendChild(cartItem);
    });
  }

  cartIcon.addEventListener('click', () => {
    cartContainer.classList.toggle('show-cart');
  });
})
.catch(error => {
  console.log('Error fetching books:', error);
});

function padDigits(number,digits) {
return number.toString().padStart(digits, '0');
}
    </script>
</head>
<body>
  <div id="cart-icon">
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTWX3MGbr3TnrQNTGCHKkA4VRRNR1hx9OuWgBNe9LLOUBjVuQ_2tKdEdacZWRr8HUQYg7s&usqp=CAU" alt="Cart Icon" id="cart-icon-image" />
    <span id="cart-item-count">0</span>
   </div>
  <ul id="books"></ul>
</body>
</html>